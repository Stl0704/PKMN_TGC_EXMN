<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="ultra-bola.png">
</head>
<style>
  body {
    background-image: url('https://img.freepik.com/vector-premium/diseno-banner-abstracto-rayas-negras-amarillas-gris-oscuro-fondo-vector-tecnologia-geometrica_181182-14043.jpg');
    background-size: cover;
  }

  /* Card Menu */
  @keyframes card_menu {
    0% {
      opacity: 0;
      transform: translateY(50px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .custom-card {
    background-color: black;
    color: white;
    position: relative;
    /* Añadido para establecer el contexto de posición */
  }

  .custom-card .card-title,
  .custom-card .card-text {
    color: white;
  }

  .custom-card .btn {
    background-color: white;
    color: black;
  }

  .custom-card .card-img {
    position: absolute;
    /* Añadido para ajustar la posición de la imagen */
    top: 0;
    left: 0;
    width: 100%;
    /* La imagen ocupa todo el ancho de la tarjeta */
    height: 100%;
    /* La imagen ocupa todo el alto de la tarjeta */
    object-fit: cover;
    /* La imagen se ajusta para cubrir toda la tarjeta */
    object-position: center;
    /* La imagen se centra dentro de la tarjeta */
  }
</style>

<body>
  <!-- banner1  -->
  <img
    src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/11427705-3dd3-423a-a8ca-1968b97f1101/d6d4a5k-f4c9b43b-b2fe-4b59-bdc3-ba974fff6c3b.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzExNDI3NzA1LTNkZDMtNDIzYS1hOGNhLTE5NjhiOTdmMTEwMVwvZDZkNGE1ay1mNGM5YjQzYi1iMmZlLTRiNTktYmRjMy1iYTk3NGZmZjZjM2IucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.pHbSmJIuVrJheeVadShSncEOsTbAvbr9zr12zamcZb0"
    alt="Banner de ejemplo" style="width:100%;">

  <!-- navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="{% url 'home' %}" style="color: yellow;"><img
        src="https://cdn.icon-icons.com/icons2/896/PNG/64/pokemon_go_play_game_cinema_film_movie_2_icon-icons.com_69159.png"
        alt="logo" class="logo-img"> POKEMON TGC</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="{% url 'home' %}" style="color: yellow">Inicio <span
              class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'compra' %}" style="color: yellow">Producto</a>
        </li>
        <li class="nav-item ">
          <a class="nav-link" href="{% url 'carrito' %}" style="color: yellow">Carrito de compras</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false"
            style="color: yellow">
            Sesión
          </a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="{% url 'signin' %}">Iniciar sesión</a>
            <a class="dropdown-item" href="{% url 'signup' %}">Crear cuenta</a>
            <div class="dropdown-divider"></div>
          </div>
        </li>
      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit" style="color: yellow">Buscar</button>
      </form>
    </div>
  </nav>
  <!-- banner2  -->
  <img src="https://www.juegomania.cl/wp-content/uploads/2023/01/BANNER.jpg" alt="Banner." style="width:100%;">

  <!-- carrito de compras  -->

  <div class=" text-center">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb justify-content-center breadcrumb" style="color: rgb(0, 0, 0); background-color: black;">
        <li class="breadcrumb-item active" aria-current="page" style="color: rgb(10, 10, 10);">
          <h3 style="color: white;">CARRITO DE COMPRAS</h3>
        </li>
      </ol>
    </nav>
  </div>

  <!-- productos agregados  -->
  <div class="text-center">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb justify-content-center breadcrumb" style="color: rgb(0, 0, 0); background-color: black;">
        <li class="nav-item mx-auto" style="color: white;">
          <h1 id="carrito">Productos agregados: </h1>
        </li>
      </ol>
    </nav>
  </div>

  <!-- total  -->
  <div class="text-center">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb justify-content-center breadcrumb" style="color: rgb(0, 0, 0); background-color: black;">
        <li class="nav-item mx-auto" style="color: white;">
          <h1>TOTAL: ${{ total }}</h1>
        </li>
        <li class="nav-item mx-auto" style="color: white;">
          <h1 id="total-value">$0</h1>
        </li>
      </ol>
    </nav>
  </div>



  <!-- listado productos -->
  <center>
    {% for items in listado %}
    <div class="col-lg-3 col-md-6 col-sm-12 py-2 d-inline-block">
      <div class="card"
        style="width: 225px; background-color: rgb(0,0,0); animation: card_menu 1s linear 0s 1 normal backwards;;">
        <img src="{{ items.imagen }}" class="card-img-top2" alt="...">
        <div class="card-body">
          <h2 class="card-title" id="carta1">{{ items.nombre }}</h2>
          <p class="card-text">
            <h4>Edicion: XY EVOLUTIONS</h4>
            <h5>Año 2016.</h5>
            <h5>Precio: {{ items.precio }} CLP</h5>
          </p>
          <td>
            <button onclick="agregarCarro('{{ items.id }}', '{{ items.precio }}', '{{ items.nombre }}')"
              class="btn btn-danger">Agregar a carrito</button>
            <button onclick="quitarCarta('{{ carta.id }}')" class="btn btn-danger"
            >Quitar de la compra</button>
          </td>
        </div>
      </div>
    </div>
    {% endfor %}
  </center>
  



  <img
    src="https://camo.githubusercontent.com/90f24316b24433bf0a2778d95ca93ad264093645a71d2eb9f569cdbc34fbfc6d/68747470733a2f2f6372797374616c2d63646e322e6372797374616c636f6d6d657263652e636f6d2f70686f746f732f363333303536352f73706c61736842616e6e65725f706f6b656d6f6e2e6a7067"
    alt="Banner." style="width:100%;">

  <!-- footer  -->

  <footer style="background-color: #fbff57;" style=" border-color: black;">
    <p style="font-size: 20px; font-weight: bold;">COMPRA SEGURA ✓✓✓</p>
    <img src="desbloquear.png" alt="" class="logo-img" width="50">
    <hr>
    <div class="footer-icons-container row">
      <p><a HREF="https://es-la.facebook.com/"> <img src="https://cdn-icons-png.flaticon.com/128/1384/1384005.png"
            width="30"> </a>
        <a HREF="https://www.instagram.com/"> <img src="https://cdn-icons-png.flaticon.com/128/1384/1384015.png"
            width="30"></a>
        <a HREF="https://twitter.com/"> <img src="https://cdn-icons-png.flaticon.com/128/4494/4494465.png"
            width="30"></a>
      </p>
      <br>
      <p>Author: Miguel Montero y Mario Fica</p>
      <br>
      <p><a href="Correo contacto: pokemontgc@pokemon.pkm">pokemontgc@pokemon.pkm</a></p>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
    integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
    crossorigin="anonymous"></script>


  <script>
    var carrito = $("#carrito");
    var totalElement = $("#total-value");
    var total = 0;

    function agregarCarro(producto, valor, nombreCarta) {
      alert("Se ha agregado el producto: " + nombreCarta);
      var articulo = {
        producto: producto,
        valor: parseFloat(valor),
        nombreCarta: nombreCarta
      };

      ListaCarro.push(articulo);

      var mensaje = "Productos agregados: " + ListaCarro.length;
      carrito.html(mensaje);
      total = ListaCarro.reduce(function (acc, curr) {
        return acc + curr.valor;
      }, 0);
      totalElement.html("Total: $" + total.toFixed(2));
    }

    var ListaCarro = [];

    function quitarCarta(producto) {
  // Realizar una petición AJAX para eliminar la carta de la compra
  $.ajax({
    type: "POST",
    url: "/eliminar-carta/",
    data: {
      producto: producto
    },
    success: function(response) {
      // Si la eliminación fue exitosa, mostrar un mensaje de éxito
      alert("Carta eliminada correctamente");
      // Aquí puedes realizar alguna acción adicional, como actualizar la lista de cartas en la interfaz
    },
    error: function(xhr, textStatus, error) {
      // Si ocurre un error en la petición, mostrar un mensaje de error
      alert("Error al eliminar la carta: " + error);
    }
  });
}

  </script>


</body>


</html>